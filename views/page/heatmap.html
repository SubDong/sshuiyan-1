<html lang="en">
<meta charset="utf-8">
<head>
    <script type="text/javascript" src="http://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="../js/heatmap/heatmap.js"></script>
    <style>
        body, html, h2 {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        body {
            font-family: sans-serif;
        }

        body * {
            font-weight: 200;
        }

        #heatmap {
            position: absolute;
            float: left;
            height: 99%;
            width: 99%;
            background: #000;
            filter: alpha(Opacity=80);
            -moz-opacity: 0.5;
            opacity: 0.5;
            overflow: hidden;
            z-index: 100;
        }

        .iframebox {
            position: relative;
            height: 100%;
            width: 100%;
        }

        #iframe {
            position: absolute;
            height: 100%;
            width: 100%;
        }
    </style>

</head>
<body style="margin:0px;padding:0px; width:100%;overflow:hidden" onload="parent.setsize(document.body.scrollHeight);">
<div class="iframebox">
    <div id="heatmap">
    </div>
    <iframe id="iframe" src="http://www.best-ad.cn/" frameborder="0" style="overflow:hidden;width:100%" height="100%"  width="100%">
    </iframe>
</div>
<script type="text/javascript">
    $(function(){
        $.get("/api/heatmap",function(res){
            console.log(res);
            heatmaponlad(res);
        });
    });
    function heatmaponlad(res) {
        var xx = h337.create({"element": document.getElementById("heatmap"), "radius": 25, "visible": true});
        var el = {max: 1000000, data: res};
        xx.store.setDataSet(el,null);


        /*document.getElementById("heatmap").style.height = document.getElementById("iframe").scrollHeight + "px";
        document.getElementById("heatmap").style.width = document.getElementById("iframe").scrollWidth + "px" - 10;
        console.log(document.getElementById("iframe"))*/
        /*        xx.get("canvas").onclick = function(ev){
         var pos = h337.util.mousePosition(ev);
         xx.store.addDataPoint(pos[0],pos[1]);
         };*/
        /*    document.getElementById("gen").onclick = function(){
         xx.store.generateRandomDataSet(100);
         };*/

    }

</script>
</body>
<html>
